# ==========================================
# ğŸ”° Clash Meta (Mihomo) é“¾å¼ä»£ç† - ä¿®å¤å¢å¼ºç‰ˆ
# æ›´æ–°å†…å®¹ï¼šç«¯å£æ”¹ä¸º7890æ··åˆã€å¢å¼ºå›½å†…ç™½åå•(ä¿®å¤å­—èŠ‚è·³åŠ¨/ç½‘æ˜“)ã€DNSä¼˜åŒ–
# ==========================================

# --- 1. åŸºç¡€è®¾ç½® ---
mixed-port: 7890        # æ··åˆç«¯å£ (HTTP+SOCKS5)
allow-lan: true         # å¼€å¯å±€åŸŸç½‘å…±äº«
bind-address: '*'       # å…è®¸å±€åŸŸç½‘å†…æ‰€æœ‰IPè¿æ¥
mode: rule
log-level: info
ipv6: true              # å»ºè®®å¼€å¯ï¼Œé¿å…éƒ¨åˆ†V6ç¯å¢ƒæŠ¥é”™
external-controller: 0.0.0.0:9090

# --- 2. DNS è®¾ç½® (é˜²æ³„æ¼ + å›½å†…ä¼˜åŒ–) ---
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - "*.srv.nintendo.net"
    - "*.stun.playstation.net"
    - "xbox.*.microsoft.com"
    - "*.xboxlive.com"
    - "*.msftncsi.com"
    - "*.msftconnecttest.com"
    - "localhost.ptlogin2.qq.com"
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  fallback:
    - tls://1.1.1.1:853
    - tls://8.8.8.8:853
  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4

# ==========================================
# ğŸ‘‡ è¯·åœ¨ä¸‹æ–¹å¡«å…¥ä½ çš„èŠ‚ç‚¹ä¿¡æ¯ ğŸ‘‡
# ==========================================
proxies:
  # ----------------------------------------
  # A ç±»ï¼šå…¥å£èŠ‚ç‚¹ (å¡«å†™ä½ ä¹°çš„æœºåœºèŠ‚ç‚¹/ä¸­è½¬æœº)
  # ----------------------------------------
  - name: "âœˆï¸ å…¥å£-é¦™æ¸¯"
    type: ss  # ğŸ‘‰ å¦‚æœæ˜¯ vmess å°±æ”¹ vmessï¼Œæ³¨æ„ç¼©è¿›
    # ğŸ‘‡ğŸ‘‡ğŸ‘‡ åœ¨è¿™é‡Œå¡«å…¥ä¿¡æ¯ ğŸ‘‡ğŸ‘‡ğŸ‘‡
    server: hk.example.com       # å¡«æœåŠ¡å™¨åœ°å€
    port: 12345                  # å¡«ç«¯å£
    cipher: aes-128-gcm          # å¡«åŠ å¯†æ–¹å¼
    password: "ä½ çš„å¯†ç "          # å¡«å¯†ç /UUID
    udp: true

  # ----------------------------------------
  # B ç±»ï¼šå‡ºå£èŠ‚ç‚¹ (å¡«å†™ä½ çš„é™æ€IP/è½åœ°æœº)
  # ----------------------------------------
  - name: "ğŸš€ é“¾å¼-é™æ€è½åœ°å‡ºå£"
    type: socks5  # ğŸ‘‰ é™æ€IPé€šå¸¸æ˜¯ socks5
    # ğŸ‘‡ğŸ‘‡ğŸ‘‡ åœ¨è¿™é‡Œå¡«å…¥ä¿¡æ¯ ğŸ‘‡ğŸ‘‡ğŸ‘‡
    server: 1.2.3.4              # å¡«è½åœ°IP
    port: 8080                   # å¡«è½åœ°ç«¯å£
    username: "user"             # ç”¨æˆ·å (æ²¡æœ‰å°±åˆ æ‰è¿™è¡Œ)
    password: "password"         # å¯†ç  (æ²¡æœ‰å°±åˆ æ‰è¿™è¡Œ)
    skip-cert-verify: true
    udp: true
    # ğŸ‘‡ é“¾å¼ä»£ç†æ ¸å¿ƒï¼šæµé‡å…ˆèµ°"å…¥å£"ï¼Œå†è¿"å‡ºå£"
    dialer-proxy: "ğŸšª é“¾å¼-å…¥å£é€‰æ‹©"

# ==========================================
# ç­–ç•¥ç»„ (é€»è¾‘æ§åˆ¶)
# ==========================================
proxy-groups:
  # ä¸»å¼€å…³
  - name: "Final"
    type: select
    proxies:
      - "ğŸ¤– AI-éšç§ä¸“ç”¨"
      - "ğŸ“¥ å¤§æµé‡ä¸‹è½½"
      - "DIRECT"

  # AI ä¸“ç”¨é€šé“ (å¼ºåˆ¶èµ°é“¾å¼-é™æ€IP)
  - name: "ğŸ¤– AI-éšç§ä¸“ç”¨"
    type: select
    proxies:
      - "ğŸš€ é“¾å¼-é™æ€è½åœ°å‡ºå£"

  # å…¥å£åˆ‡æ¢å™¨ (åœ¨è¿™é‡Œé€‰ä½ è¦ç”¨å“ªä¸ªæœºåœºèŠ‚ç‚¹ä½œä¸ºå‰ç½®ä¸­è½¬)
  - name: "ğŸšª é“¾å¼-å…¥å£é€‰æ‹©"
    type: select
    proxies:
      - "âœˆï¸ å…¥å£-é¦™æ¸¯"
      # - "âœˆï¸ å…¥å£-æ—¥æœ¬" # å¦‚æœä½ åœ¨ä¸Šé¢åŠ äº†å…¶ä»–å…¥å£ï¼Œè¿™é‡Œè®°å¾—åŠ ä¸Š

  # ä¸‹è½½ä¸“ç”¨é€šé“ (é€šå¸¸å»ºè®®ç›´è¿æˆ–ç”¨ä¾¿å®œèŠ‚ç‚¹ï¼Œä¸æµªè´¹é™æ€æµé‡)
  - name: "ğŸ“¥ å¤§æµé‡ä¸‹è½½"
    type: select
    proxies:
      - "DIRECT" 
      - "âœˆï¸ å…¥å£-é¦™æ¸¯"

rules:
  # ----------------------------------------------------------------------
  # 1. åŸºç¡€ç›´è¿ (å±€åŸŸç½‘/ä¿ç•™åœ°å€)
  # ----------------------------------------------------------------------
  - IP-CIDR,127.0.0.1/32,DIRECT,no-resolve
  - DOMAIN-SUFFIX,local,DIRECT,no-resolve
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
  - IP-CIDR,17.0.0.0/8,DIRECT,no-resolve

  # ----------------------------------------------------------------------
  # 2. å­—èŠ‚è·³åŠ¨ (æŠ–éŸ³/å¤´æ¡/è¥¿ç“œ) - æ·±åº¦è¡¥å…¨ç‰ˆ
  # ----------------------------------------------------------------------
  # æ ¸å¿ƒä¸šåŠ¡
  - DOMAIN-SUFFIX,snssdk.com,DIRECT
  - DOMAIN-SUFFIX,amemv.com,DIRECT
  - DOMAIN-SUFFIX,douyin.com,DIRECT
  - DOMAIN-SUFFIX,douyinpic.com,DIRECT
  - DOMAIN-SUFFIX,douyinstatic.com,DIRECT
  - DOMAIN-SUFFIX,douyinvod.com,DIRECT
  - DOMAIN-SUFFIX,idouyinvod.com,DIRECT
  - DOMAIN-SUFFIX,ixigua.com,DIRECT
  - DOMAIN-SUFFIX,pstatp.com,DIRECT
  - DOMAIN-SUFFIX,toutiao.com,DIRECT
  - DOMAIN-SUFFIX,toutiaaimg.com,DIRECT
  - DOMAIN-SUFFIX,toutiaocdn.com,DIRECT
  - DOMAIN-SUFFIX,toutiaocloud.com,DIRECT
  - DOMAIN-SUFFIX,toutiaopage.com,DIRECT
  - DOMAIN-SUFFIX,bytecdn.cn,DIRECT
  - DOMAIN-SUFFIX,byteimg.com,DIRECT
  - DOMAIN-SUFFIX,bytescm.com,DIRECT
  - DOMAIN-SUFFIX,bytedance.com,DIRECT
  - DOMAIN-SUFFIX,bytedance.net,DIRECT
  - DOMAIN-SUFFIX,bytedns.net,DIRECT
  # å…³é”®åŸºç¡€è®¾æ–½ (ä¹‹å‰æ¼æ‰çš„é‡ç¾åŒº)
  - DOMAIN-SUFFIX,ibytedtos.com,DIRECT
  - DOMAIN-SUFFIX,volces.com,DIRECT
  - DOMAIN-SUFFIX,zijieapi.com,DIRECT
  - DOMAIN-SUFFIX,ecombdapi.com,DIRECT
  - DOMAIN-SUFFIX,pangolin-sdk-toutiao.com,DIRECT
  - DOMAIN-SUFFIX,pglstatp-toutiao.com,DIRECT
  - DOMAIN-KEYWORD,core-c-lq,DIRECT
  - DOMAIN-KEYWORD,core-lq,DIRECT
  - DOMAIN-KEYWORD,normal-c-lq,DIRECT
  - DOMAIN-KEYWORD,normal-lq,DIRECT
  - DOMAIN-KEYWORD,search-quic-lq,DIRECT
  - DOMAIN-KEYWORD,search-lq,DIRECT

  # ----------------------------------------------------------------------
  # 3. è…¾è®¯ç³» (å¾®ä¿¡/QQ/æ¸¸æˆ)
  # ----------------------------------------------------------------------
  - DOMAIN-SUFFIX,qq.com,DIRECT
  - DOMAIN-SUFFIX,tencent.com,DIRECT
  - DOMAIN-SUFFIX,weixin.com,DIRECT
  - DOMAIN-SUFFIX,qlogo.cn,DIRECT
  - DOMAIN-SUFFIX,qpic.cn,DIRECT
  - DOMAIN-SUFFIX,gtimg.cn,DIRECT
  - DOMAIN-SUFFIX,gtimg.com,DIRECT
  - DOMAIN-SUFFIX,cdn-go.cn,DIRECT
  - DOMAIN-SUFFIX,smtcdns.com,DIRECT
  - IP-CIDR,182.254.116.0/24,DIRECT,no-resolve
  - IP-CIDR,203.205.238.0/23,DIRECT,no-resolve
  - IP-CIDR,203.205.254.0/23,DIRECT,no-resolve

  # ----------------------------------------------------------------------
  # 4. é˜¿é‡Œå·´å·´ (æ·˜å®/æ”¯ä»˜å®/é˜¿é‡Œäº‘)
  # ----------------------------------------------------------------------
  - DOMAIN-SUFFIX,alibaba.com,DIRECT
  - DOMAIN-SUFFIX,alibabacloud.com,DIRECT
  - DOMAIN-SUFFIX,alicdn.com,DIRECT
  - DOMAIN-SUFFIX,alipay.com,DIRECT
  - DOMAIN-SUFFIX,alipayobjects.com,DIRECT
  - DOMAIN-SUFFIX,aliyun.com,DIRECT
  - DOMAIN-SUFFIX,aliyuncdn.com,DIRECT
  - DOMAIN-SUFFIX,aliyuncs.com,DIRECT
  - DOMAIN-SUFFIX,mmstat.com,DIRECT
  - DOMAIN-SUFFIX,taobao.com,DIRECT
  - DOMAIN-SUFFIX,tmall.com,DIRECT

  # ----------------------------------------------------------------------
  # 5. ç½‘æ˜“ (äº‘éŸ³ä¹/é‚®ç®±/æ¸¸æˆ)
  # ----------------------------------------------------------------------
  - DOMAIN-SUFFIX,163.com,DIRECT
  - DOMAIN-SUFFIX,163yun.com,DIRECT
  - DOMAIN-SUFFIX,126.net,DIRECT
  - DOMAIN-SUFFIX,127.net,DIRECT
  - DOMAIN-SUFFIX,netease.com,DIRECT
  - DOMAIN-SUFFIX,ydstatic.com,DIRECT
  - DOMAIN-SUFFIX,music.126.net,DIRECT

  # ----------------------------------------------------------------------
  # 6. Bç«™ (Bilibili)
  # ----------------------------------------------------------------------
  - DOMAIN-SUFFIX,bilibili.com,DIRECT
  - DOMAIN-SUFFIX,bilivideo.com,DIRECT
  - DOMAIN-SUFFIX,hdslb.com,DIRECT
  - DOMAIN-SUFFIX,biliapi.com,DIRECT
  - DOMAIN-SUFFIX,biliapi.net,DIRECT

  # ----------------------------------------------------------------------
  # 7. Cloudflare ä¸­å›½ & å¸¸è§å›½å†… CDN
  # ----------------------------------------------------------------------
  - DOMAIN-SUFFIX,cloudflare-cn.com,DIRECT
  - DOMAIN-KEYWORD,cloudflare-cn,DIRECT
  - DOMAIN-SUFFIX,baidupcs.com,DIRECT
  - DOMAIN-SUFFIX,bdstatic.com,DIRECT
  - DOMAIN-SUFFIX,xycdn.com,DIRECT
  - DOMAIN-SUFFIX,mcdn.bilivideo.cn,DIRECT

  # ----------------------------------------------------------------------
  # 8. ç³»ç»Ÿä¸å¾®è½¯ (Winæ›´æ–°/å›½å†…ä¸‹è½½)
  # ----------------------------------------------------------------------
  - DOMAIN-SUFFIX,dl.delivery.mp.microsoft.com,DIRECT
  - DOMAIN-SUFFIX,update.microsoft.com,DIRECT
  - DOMAIN-SUFFIX,windowsupdate.com,DIRECT
  - DOMAIN-SUFFIX,download.microsoft.com,DIRECT
  - DOMAIN-SUFFIX,assets.msn.cn,DIRECT
  - DOMAIN-SUFFIX,cn.bing.com,DIRECT

  # ----------------------------------------------------------------------
  # 9. å…¶ä»–å¸¸ç”¨å›½å†…ç½‘ç«™
  # ----------------------------------------------------------------------
  - DOMAIN-SUFFIX,cn,DIRECT
  - DOMAIN-SUFFIX,360.cn,DIRECT
  - DOMAIN-SUFFIX,360buyimg.com,DIRECT
  - DOMAIN-SUFFIX,jd.com,DIRECT
  - DOMAIN-SUFFIX,iqiyi.com,DIRECT
  - DOMAIN-SUFFIX,youku.com,DIRECT
  - DOMAIN-SUFFIX,mgtv.com,DIRECT
  - DOMAIN-SUFFIX,zhihu.com,DIRECT
  - DOMAIN-SUFFIX,weibo.com,DIRECT
  - DOMAIN-SUFFIX,xiaomi.com,DIRECT
  - DOMAIN-SUFFIX,meituan.com,DIRECT
  - DOMAIN-SUFFIX,dianping.com,DIRECT
  - DOMAIN-SUFFIX,douban.com,DIRECT
  - DOMAIN-SUFFIX,sohu.com,DIRECT
  - DOMAIN-SUFFIX,sogou.com,DIRECT
  - DOMAIN-SUFFIX,sina.com.cn,DIRECT
  - DOMAIN-SUFFIX,smzdm.com,DIRECT
  - DOMAIN-SUFFIX,caiyunapp.com,DIRECT

  # ----------------------------------------------------------------------
  # 10. æœ€ç»ˆå…œåº•è§„åˆ™
  # ----------------------------------------------------------------------
  # å¦‚æœä¸Šè¿°åŸŸåéƒ½æ²¡åŒ¹é…åˆ°ï¼Œåˆ¤æ–­IPå½’å±åœ°ã€‚å¦‚æœæ˜¯ä¸­å›½IPï¼Œç›´è¿ã€‚
  - GEOIP,CN,DIRECT,no-resolve
  # å‰©ä¸‹çš„å…¨éƒ¨èµ°ä»£ç†
  - MATCH,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
