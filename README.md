# 📘 Clash Meta 链式代理配置教程 - 超级小白版

> 🎯 **目标**：让完全不懂技术的小白也能成功配置链式代理  
> ⏱️ **预计时间**：15分钟

---

## 📚 目录

- [第一步：下载配置文件](#第一步下载配置文件)
- [第二步：填写你的节点信息](#第二步填写你的节点信息)
- [第三步：导入到Clash客户端](#第三步导入到clash客户端)
- [第四步：选择代理模式](#第四步选择代理模式)
- [常见问题解答](#常见问题解答)

---

## 🤔 什么是链式代理？

### 普通代理 vs 链式代理

```
【普通代理】
你的电脑 → 代理服务器 → 目标网站
         (IP会变)

【链式代理】
你的电脑 → 入口节点 → 出口节点 → 目标网站
         (机场节点) (固定IP)  (ChatGPT等)
```

### 🎯 为什么要用链式代理？

✅ **固定IP**：出口节点IP不变，适合需要稳定IP的服务（如ChatGPT）  
✅ **更安全**：双重加密，更难被追踪  
✅ **绕过限制**：某些服务封禁机场IP，但不封家宽IP

---

## 第一步：下载配置文件

### 方法1：直接下载（推荐）

1. 点击页面上方绿色按钮 **`Code`**
2. 选择 **`Download ZIP`**
3. 解压ZIP文件，找到 `config.yaml`

### 方法2：复制内容

1. 点击文件 `config.yaml`
2. 点击右上角 **`Raw`** 按钮
3. 全选（Ctrl+A）复制（Ctrl+C）
4. 粘贴到记事本，另存为 `config.yaml`

---

## 第二步：填写你的节点信息

### 📝 需要准备的信息

你需要两类节点：

#### A 类：入口节点（机场订阅的节点）

**从哪里获取？**
- 你购买的机场订阅
- 免费节点网站（不推荐）

**需要什么信息？**
```yaml
服务器地址: hk.example.com
端口: 12345
密码: abcd1234
加密方式: aes-128-gcm
```

#### B 类：出口节点（你自己的VPS/落地机）

**从哪里获取？**
- 自己搭建的VPS（需要有固定IP）
- 购买的静态IP住宅代理

**需要什么信息？**
```yaml
服务器地址: 1.2.3.4（你的VPS IP）
端口: 8080
用户名: user（如果有）
密码: password（如果有）
```

---

### ✏️ 开始修改配置文件

#### 步骤1：用记事本打开 `config.yaml`

**Windows:**
- 右键文件 → 打开方式 → 记事本

**Mac:**
- 右键文件 → 打开方式 → 文本编辑

---

#### 步骤2：找到"入口节点"部分

**定位方法：**  
按 `Ctrl + F` 搜索：`A 类：入口节点`

**看到这样的内容：**
```yaml
  - name: "✈️ 入口-香港"
    type: ss
    server: hk.example.com      # ← 改这里
    port: 12345                  # ← 改这里
    cipher: aes-128-gcm
    password: "你的密码"         # ← 改这里
    udp: true
    dial-timeout: 15000
```

**修改示例：**

假设你的机场给了你这个节点：
```
服务器：hk01.airport.com
端口：443
密码：mypassword123
加密：aes-256-gcm
```

改成：
```yaml
  - name: "✈️ 入口-香港"
    type: ss
    server: hk01.airport.com     # ✅ 改成你的服务器
    port: 443                     # ✅ 改成你的端口
    cipher: aes-256-gcm          # ✅ 改成你的加密方式
    password: "mypassword123"    # ✅ 改成你的密码
    udp: true
    dial-timeout: 15000
```

---

#### 步骤3：找到"出口节点"部分

**定位方法：**  
搜索：`B 类：链式出口`

**看到这样的内容：**
```yaml
  - name: "🚀 链式-静态出口"
    type: socks5
    server: 1.2.3.4              # ← 改这里
    port: 8080                    # ← 改这里
    username: "user"              # ← 改这里（没有就删掉）
    password: "password"          # ← 改这里（没有就删掉）
    udp: true
    dialer-proxy: "🚪 入口选择"  # ← 不要动！
    dial-timeout: 30000
```

**修改示例：**

假设你的VPS信息是：
```
IP地址：45.67.89.100
端口：1080
用户名：myuser
密码：mypass123
```

改成：
```yaml
  - name: "🚀 链式-静态出口"
    type: socks5
    server: 45.67.89.100         # ✅ 改成你的VPS IP
    port: 1080                    # ✅ 改成你的端口
    username: "myuser"            # ✅ 改成你的用户名
    password: "mypass123"         # ✅ 改成你的密码
    udp: true
    dialer-proxy: "🚪 入口选择"  # ❌ 这行千万不要动！
    dial-timeout: 30000
```

⚠️ **重要提示：**
- 如果你的出口节点没有用户名密码，**删除** `username` 和 `password` 那两行
- `dialer-proxy: "🚪 入口选择"` 这行**绝对不能删**，它是链式代理的关键！

---

#### 步骤4：更新策略组节点列表

**定位方法：**  
搜索：`🚪 入口选择`

**找到这部分：**
```yaml
  - name: "🚪 入口选择"
    type: select
    proxies:
      - "⚡ 自动切换"
      - "✈️ 入口-香港"      # ← 确保这个名字和上面的入口节点名字一致
```

**再找到"自动切换"部分：**
```yaml
  - name: "⚡ 自动切换"
    type: url-test
    proxies:
      - "✈️ 入口-香港"      # ← 也要确保名字一致
```

**找到"链式代理"部分：**
```yaml
  - name: "🔗 链式代理"
    type: select
    proxies:
      - "🚀 链式-静态出口"  # ← 确保这个名字和上面的出口节点名字一致
```

⚠️ **节点名字必须一模一样！**
- 如果你把入口节点改名为 `"HK-01"`
- 那么策略组里也要改成 `"HK-01"`
- 包括前后的引号、空格、符号都要一致

---

#### 步骤5：保存文件

1. 按 `Ctrl + S` 保存
2. 确保文件名是 `config.yaml`（不是 `config.yaml.txt`）

**如何检查文件名？**
- Windows: 文件夹选项 → 查看 → 取消勾选"隐藏已知文件类型的扩展名"
- Mac: 文件名直接显示 `.yaml` 后缀

---

## 第三步：导入到Clash客户端

### 📱 安卓手机（Clash for Android）

1. **打开CFA** → 点击顶部 **"配置"**
2. 点击右下角 **"+"** 按钮
3. 选择 **"从文件导入"**
4. 找到你修改好的 `config.yaml`，点击导入
5. 点击新导入的配置，启用它

### 💻 电脑（Clash for Windows）

1. **打开CFW** → 点击左侧 **"配置"**
2. 点击下方 **"导入配置文件"** 或直接拖拽 `config.yaml` 到窗口
3. 点击新导入的配置右边的 **绿色圆圈**，激活它
4. 点击左侧 **"常规"** → 打开 **"系统代理"**

### 🍎 苹果电脑（ClashX）

1. **打开ClashX** → 点击菜单栏图标
2. 选择 **"配置"** → **"导入配置"**
3. 选择你的 `config.yaml` 文件
4. 在配置列表中勾选新导入的配置

### 📱 苹果手机（Stash）

1. **打开Stash** → 点击底部 **"配置"**
2. 点击右上角 **"+"** → **"从文件导入"**
3. 选择 `config.yaml`
4. 启用该配置

---

## 第四步：选择代理模式

### 🎛️ 在Clash客户端中操作

#### 手机端（CFA/Stash）：

1. 点击顶部 **"代理"** 标签
2. 找到 **"🚪 入口选择"** 这一栏
3. 选择你想要的模式：

**模式1：自动模式（推荐新手）**
```
点击选择 → "⚡ 自动切换"
✅ 系统会自动选最快的入口节点
```

**模式2：手动模式（精细控制）**
```
点击选择 → "✈️ 入口-香港"（或其他具体节点）
✅ 固定使用该入口节点
```

4. 再找到 **"🔗 链式代理"** 这一栏
5. 选择 **"🚀 链式-静态出口"**

6. 最后找到 **"🎛️ 模式切换"**
7. 选择 **"🔗 链式代理"**

---

#### 电脑端（CFW/ClashX）：

1. 点击 **"代理"** 或 **"Proxies"** 标签
2. 找到 **"🚪 入口选择"** 策略组
   - 选择 **"⚡ 自动切换"** 或具体节点
3. 找到 **"🔗 链式代理"** 策略组
   - 选择 **"🚀 链式-静态出口"**
4. 找到 **"🎛️ 模式切换"** 策略组
   - 选择 **"🔗 链式代理"**

---

### ✅ 验证是否成功

#### 方法1：检查IP（推荐）

1. 打开浏览器访问：https://ip.sb/
2. 看到的IP应该是**你的VPS IP地址**（出口节点的IP）
3. 如果显示的是VPS IP，说明链式代理成功！

#### 方法2：访问目标网站

1. 尝试访问 ChatGPT、Google 等网站
2. 能正常访问说明代理工作正常

---

## 🎓 进阶使用

### 如何添加多个入口节点？

在"入口节点"部分，复制粘贴一份，修改名字和信息：

```yaml
  # 第一个入口
  - name: "✈️ 入口-香港"
    type: ss
    server: hk01.airport.com
    port: 443
    cipher: aes-256-gcm
    password: "password1"
    udp: true
    dial-timeout: 15000

  # 第二个入口（复制上面的，改名字和信息）
  - name: "✈️ 入口-日本"
    type: ss
    server: jp01.airport.com
    port: 443
    cipher: aes-256-gcm
    password: "password2"
    udp: true
    dial-timeout: 15000
```

然后在策略组里也要添加：

```yaml
  - name: "🚪 入口选择"
    type: select
    proxies:
      - "⚡ 自动切换"
      - "✈️ 入口-香港"
      - "✈️ 入口-日本"       # ← 新增这行

  - name: "⚡ 自动切换"
    type: url-test
    proxies:
      - "✈️ 入口-香港"
      - "✈️ 入口-日本"       # ← 新增这行
```

---

### 如何添加多个出口节点？

同理，复制出口节点部分：

```yaml
  - name: "🚀 台湾出口"
    type: socks5
    server: 45.67.89.100
    port: 1080
    udp: true
    dialer-proxy: "🚪 入口选择"  # ← 不要忘记这行！
    dial-timeout: 30000

  - name: "🚀 美国出口"
    type: socks5
    server: 45.67.89.200
    port: 1080
    udp: true
    dialer-proxy: "🚪 入口选择"  # ← 不要忘记这行！
    dial-timeout: 30000
```

在策略组里添加：

```yaml
  - name: "🔗 链式代理"
    type: select
    proxies:
      - "🚀 台湾出口"
      - "🚀 美国出口"
```

---

## ❓ 常见问题解答

### Q1: 导入配置后显示"配置文件错误"？

**可能原因：**
1. **缩进错误**：YAML文件对缩进非常敏感
   - ✅ 正确：用**2个空格**缩进
   - ❌ 错误：用Tab键或4个空格

2. **引号问题**：
   - ✅ 正确：`password: "abc123"`
   - ❌ 错误：`password: abc123`（密码必须加引号）

3. **冒号后面没有空格**：
   - ✅ 正确：`server: 1.2.3.4`（冒号后有空格）
   - ❌ 错误：`server:1.2.3.4`（冒号后没空格）

**解决方法：**
- 用在线YAML检查工具：https://www.yamllint.com/
- 复制粘贴你的配置，看哪一行有错误

---

### Q2: 连接超时/连不上？

**解决步骤：**

1. **先测试入口节点能否单独使用**
   - 在"🎛️ 模式切换"选择"DIRECT"
   - 手动访问你的机场节点，看能否连接

2. **再测试出口节点**
   - 用其他工具（如浏览器代理插件）直连VPS
   - 确认VPS的代理服务正常运行

3. **增加超时时间**
   - 把 `dial-timeout: 15000` 改为 `30000`
   - 把 `dial-timeout: 30000` 改为 `60000`

---

### Q3: IP显示的不是VPS IP？

**检查清单：**

- [ ] "🚪 入口选择" 是否选择了节点？
- [ ] "🔗 链式代理" 是否选择了出口节点？
- [ ] "🎛️ 模式切换" 是否选择了"🔗 链式代理"？
- [ ] 出口节点的 `dialer-proxy` 参数是否写对？

**正确的配置应该是：**
```
🎛️ 模式切换 → 🔗 链式代理
🔗 链式代理 → 🚀 链式-静态出口
🚪 入口选择 → ⚡ 自动切换（或具体节点）
```

---

### Q4: 手机上找不到"🚪 入口选择"？

**原因：**  
策略组类型设置错误，改为了 `url-test` 或 `fallback`

**解决方法：**
确保配置文件中是这样的：
```yaml
  - name: "🚪 入口选择"
    type: select        # ← 必须是 select
    proxies:
      - "⚡ 自动切换"
      # ...
```

---

### Q5: 能连接但速度很慢？

**优化建议：**

1. **选择更近的入口节点**
   - 在"🚪 入口选择"手动选择延迟低的节点
   - 或使用"⚡ 自动切换"让系统自动选

2. **检查VPS性能**
   - VPS带宽是否足够
   - CPU占用是否过高

3. **关闭UDP转发**（如果不需要）
   - 把 `udp: true` 改为 `udp: false`

---

### Q6: ChatGPT提示"不支持的地区"？

**检查：**
1. 访问 https://ip.sb/ 确认IP是VPS的IP
2. 确认VPS所在地区ChatGPT是支持的（如美国、日本、新加坡）
3. 清除浏览器Cookie和缓存
4. 使用无痕模式访问

---

## 📞 获取帮助

如果以上方法都不行，请在Issues区提问，提供以下信息：

1. 你使用的客户端（CFW/CFA/ClashX/Stash）
2. 错误截图或日志
3. 配置文件（**记得隐藏密码、服务器地址等敏感信息**）

---

## 📄 许可证

本项目采用 MIT 许可证

---

## ⭐ 觉得有用？

- 给个Star支持一下
- 分享给有需要的朋友
- 欢迎提交Issues和Pull Requests
